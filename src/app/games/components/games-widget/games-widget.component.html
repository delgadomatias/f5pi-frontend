@let isLoading = gamesResource.isLoading();

<f5pi-generic-widget widgetTitle="Games">
  <ng-template #headerActions></ng-template>
  <ng-template #content>
    <table
      mat-table
      [dataSource]="
        gamesResource.value()?.content || [
          {
            gameId: 'Loading...',
            date: 'Loading...',
            individualPrice: 0,
            field: 'Loading...',
            season: 'Loading...',
          }
        ]
      "
    >
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef>Date</th>
        @if (isLoading) {
        <td mat-cell *matCellDef="let element">
          <div class="loading"></div>
        </td>
        } @else {
        <td mat-cell *matCellDef="let element">
          {{ element.date | date : "MMM d, yyyy" }}
        </td>
        }
      </ng-container>

      <ng-container matColumnDef="individualPrice">
        <th mat-header-cell *matHeaderCellDef>Individual price</th>
        @if (isLoading) {
        <td mat-cell *matCellDef="let element">
          <div class="loading"></div>
        </td>
        } @else {
        <td mat-cell *matCellDef="let element">
          {{ element.individualPrice | currency : "USD" : "symbol" : "1.2-2" }}
        </td>
        }
      </ng-container>

      <ng-container matColumnDef="field">
        <th mat-header-cell *matHeaderCellDef>Field</th>
        @if (isLoading) {
        <td mat-cell *matCellDef="let element">
          <div class="loading"></div>
        </td>
        } @else {
        <td mat-cell *matCellDef="let element">
          {{ element.field }}
        </td>
        }
      </ng-container>

      <ng-container matColumnDef="season">
        <th mat-header-cell *matHeaderCellDef>Season</th>
        @if (isLoading) {
        <td mat-cell *matCellDef="let element">
          <div class="loading"></div>
        </td>
        } @else {
        <td mat-cell *matCellDef="let element">
          {{ element.season }}
        </td>
        }
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        @if (isLoading) {
        <td mat-cell *matCellDef="let element">
          <div class="loading"></div>
        </td>
        } @else {
        <td mat-cell *matCellDef="let element">
          <f5pi-table-actions entityName="game"></f5pi-table-actions>
        </td>
        }
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="['date', 'individualPrice', 'field', 'season', 'actions']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['date', 'individualPrice', 'field', 'season', 'actions']"></tr>
    </table>
  </ng-template>
  <ng-template #footer></ng-template>
</f5pi-generic-widget>
